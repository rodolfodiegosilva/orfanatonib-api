{
  "info": {
    "name": "Shelters API Collection",
    "description": "Collection completa para todos os endpoints do módulo Shelters - Atualizada com estrutura real dos DTOs e autenticação",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "3.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "{{base_url}}",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Shelters",
      "item": [
        {
          "name": "Listar Shelters (Paginação)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/shelters?page=1&limit=10&sort=name&order=ASC",
              "host": ["{{base_url}}"],
              "path": ["shelters"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Número da página (padrão: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Itens por página (padrão: 10, máximo: 100)"
                },
                {
                  "key": "sort",
                  "value": "name",
                  "description": "Campo para ordenação (name, createdAt, updatedAt, city, state)"
                },
                {
                  "key": "order",
                  "value": "ASC",
                  "description": "Ordem da ordenação (ASC, DESC, asc, desc)"
                },
                {
                  "key": "searchString",
                  "value": "",
                  "description": "Busca geral por nome, endereço, cidade, estado"
                },
                {
                  "key": "nameSearchString",
                  "value": "",
                  "description": "Busca específica por nome do shelter"
                },
                {
                  "key": "leaderId",
                  "value": "",
                  "description": "Filtrar por ID do líder"
                }
              ]
            },
            "description": "Lista todos os shelters com paginação e filtros opcionais. Requer role admin ou leader."
          },
          "response": [
            {
              "name": "Sucesso - Lista Paginada",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/shelters?page=1&limit=10&sort=name&order=ASC",
                  "host": ["{{base_url}}"],
                  "path": ["shelters"],
                  "query": [
                    {"key": "page", "value": "1"},
                    {"key": "limit", "value": "10"},
                    {"key": "sort", "value": "name"},
                    {"key": "order", "value": "ASC"}
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"items\": [\n    {\n      \"id\": \"uuid-shelter-1\",\n      \"name\": \"Abrigo Central\",\n      \"address\": {\n        \"id\": \"uuid-address-1\",\n        \"street\": \"Rua das Flores\",\n        \"number\": \"123\",\n        \"district\": \"Centro\",\n        \"city\": \"São Paulo\",\n        \"state\": \"SP\",\n        \"postalCode\": \"01234-567\",\n        \"complement\": \"Apto 45\",\n        \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n        \"updatedAt\": \"2025-09-27T21:00:00.000Z\"\n      },\n      \"leader\": {\n        \"id\": \"uuid-leader-1\",\n        \"active\": true,\n        \"user\": {\n          \"id\": \"uuid-user-1\",\n          \"name\": \"João Silva\",\n          \"email\": \"joao@example.com\",\n          \"phone\": \"+5511999999999\",\n          \"active\": true,\n          \"completed\": true,\n          \"commonUser\": false\n        }\n      },\n      \"teachers\": [\n        {\n          \"id\": \"uuid-teacher-1\",\n          \"active\": true,\n          \"user\": {\n            \"id\": \"uuid-user-2\",\n            \"name\": \"Maria Santos\",\n            \"email\": \"maria@example.com\",\n            \"phone\": \"+5511888888888\",\n            \"active\": true,\n            \"completed\": true,\n            \"commonUser\": false\n          }\n        }\n      ],\n      \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n      \"updatedAt\": \"2025-09-27T21:00:00.000Z\"\n    }\n  ],\n  \"total\": 1,\n  \"page\": 1,\n  \"limit\": 10,\n  \"pageCount\": 1\n}"
            },
            {
              "name": "Erro - Acesso Negado",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/shelters",
                  "host": ["{{base_url}}"],
                  "path": ["shelters"]
                }
              },
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"statusCode\": 403,\n  \"message\": \"Acesso negado\",\n  \"error\": \"Forbidden\"\n}"
            }
          ]
        },
        {
          "name": "Listar Shelters Simples",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/shelters/simple",
              "host": ["{{base_url}}"],
              "path": ["shelters", "simple"]
            },
            "description": "Lista todos os shelters em formato simplificado. Disponível para todos os roles."
          },
          "response": [
            {
              "name": "Sucesso - Lista Simples",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/shelters/simple",
                  "host": ["{{base_url}}"],
                  "path": ["shelters", "simple"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n  {\n    \"id\": \"uuid-shelter-1\",\n    \"name\": \"Abrigo Central\",\n    \"address\": {\n      \"id\": \"uuid-address-1\",\n      \"street\": \"Rua das Flores\",\n      \"number\": \"123\",\n      \"district\": \"Centro\",\n      \"city\": \"São Paulo\",\n      \"state\": \"SP\",\n      \"postalCode\": \"01234-567\",\n      \"complement\": \"Apto 45\",\n      \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n      \"updatedAt\": \"2025-09-27T21:00:00.000Z\"\n    },\n    \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n    \"updatedAt\": \"2025-09-27T21:00:00.000Z\"\n  }\n]"
            }
          ]
        },
        {
          "name": "Listar Shelters para Select",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/shelters/list",
              "host": ["{{base_url}}"],
              "path": ["shelters", "list"]
            },
            "description": "Lista shelters formatados para uso em selects/dropdowns. Disponível para todos os roles."
          },
          "response": [
            {
              "name": "Sucesso - Lista para Select",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/shelters/list",
                  "host": ["{{base_url}}"],
                  "path": ["shelters", "list"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n  {\n    \"id\": \"uuid-shelter-1\",\n    \"detalhe\": \"Abrigo Central : Centro\",\n    \"leader\": true\n  },\n  {\n    \"id\": \"uuid-shelter-2\",\n    \"detalhe\": \"Abrigo Jardins : Jardins\",\n    \"leader\": false\n  }\n]"
            }
          ]
        },
        {
          "name": "Buscar Shelter por ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/shelters/:id",
              "host": ["{{base_url}}"],
              "path": ["shelters", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{shelter_id}}",
                  "description": "UUID do shelter"
                }
              ]
            },
            "description": "Busca um shelter específico por ID. Disponível para todos os roles."
          },
          "response": [
            {
              "name": "Sucesso - Shelter Encontrado",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/shelters/uuid-shelter-1",
                  "host": ["{{base_url}}"],
                  "path": ["shelters", "uuid-shelter-1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"uuid-shelter-1\",\n  \"name\": \"Abrigo Central\",\n  \"address\": {\n    \"id\": \"uuid-address-1\",\n    \"street\": \"Rua das Flores\",\n    \"number\": \"123\",\n    \"district\": \"Centro\",\n    \"city\": \"São Paulo\",\n    \"state\": \"SP\",\n    \"postalCode\": \"01234-567\",\n    \"complement\": \"Apto 45\",\n    \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n    \"updatedAt\": \"2025-09-27T21:00:00.000Z\"\n  },\n  \"leader\": {\n    \"id\": \"uuid-leader-1\",\n    \"active\": true,\n    \"user\": {\n      \"id\": \"uuid-user-1\",\n      \"name\": \"João Silva\",\n      \"email\": \"joao@example.com\",\n      \"phone\": \"+5511999999999\",\n      \"active\": true,\n      \"completed\": true,\n      \"commonUser\": false\n    }\n  },\n  \"teachers\": [\n    {\n      \"id\": \"uuid-teacher-1\",\n      \"active\": true,\n      \"user\": {\n        \"id\": \"uuid-user-2\",\n        \"name\": \"Maria Santos\",\n        \"email\": \"maria@example.com\",\n        \"phone\": \"+5511888888888\",\n        \"active\": true,\n        \"completed\": true,\n        \"commonUser\": false\n      }\n    }\n  ],\n  \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n  \"updatedAt\": \"2025-09-27T21:00:00.000Z\"\n}"
            },
            {
              "name": "Erro - Shelter Não Encontrado",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/shelters/uuid-inexistente",
                  "host": ["{{base_url}}"],
                  "path": ["shelters", "uuid-inexistente"]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"statusCode\": 404,\n  \"message\": \"Shelter não encontrado\",\n  \"error\": \"Not Found\"\n}"
            }
          ]
        },
        {
          "name": "Criar Shelter",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Abrigo Central\",\n  \"address\": {\n    \"street\": \"Rua das Flores\",\n    \"number\": \"123\",\n    \"district\": \"Centro\",\n    \"city\": \"São Paulo\",\n    \"state\": \"SP\",\n    \"postalCode\": \"01234-567\",\n    \"complement\": \"Apto 45\"\n  },\n  \"leaderProfileId\": \"{{leader_profile_id}}\",\n  \"teacherProfileIds\": [\"{{teacher_profile_id}}\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/shelters",
              "host": ["{{base_url}}"],
              "path": ["shelters"]
            },
            "description": "Cria um novo shelter. Requer role admin ou leader. Leaders só podem criar shelters para si mesmos."
          },
          "response": [
            {
              "name": "Sucesso - Shelter Criado",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Abrigo Central\",\n  \"address\": {\n    \"street\": \"Rua das Flores\",\n    \"number\": \"123\",\n    \"district\": \"Centro\",\n    \"city\": \"São Paulo\",\n    \"state\": \"SP\",\n    \"postalCode\": \"01234-567\",\n    \"complement\": \"Apto 45\"\n  },\n  \"leaderProfileId\": \"uuid-leader-1\",\n  \"teacherProfileIds\": [\"uuid-teacher-1\"]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/shelters",
                  "host": ["{{base_url}}"],
                  "path": ["shelters"]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"uuid-shelter-novo\",\n  \"name\": \"Abrigo Central\",\n  \"address\": {\n    \"id\": \"uuid-address-novo\",\n    \"street\": \"Rua das Flores\",\n    \"number\": \"123\",\n    \"district\": \"Centro\",\n    \"city\": \"São Paulo\",\n    \"state\": \"SP\",\n    \"postalCode\": \"01234-567\",\n    \"complement\": \"Apto 45\",\n    \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n    \"updatedAt\": \"2025-09-27T21:00:00.000Z\"\n  },\n  \"leader\": {\n    \"id\": \"uuid-leader-1\",\n    \"active\": true,\n    \"user\": {\n      \"id\": \"uuid-user-1\",\n      \"name\": \"João Silva\",\n      \"email\": \"joao@example.com\",\n      \"phone\": \"+5511999999999\",\n      \"active\": true,\n      \"completed\": true,\n      \"commonUser\": false\n    }\n  },\n  \"teachers\": [\n    {\n      \"id\": \"uuid-teacher-1\",\n      \"active\": true,\n      \"user\": {\n        \"id\": \"uuid-user-2\",\n        \"name\": \"Maria Santos\",\n        \"email\": \"maria@example.com\",\n        \"phone\": \"+5511888888888\",\n        \"active\": true,\n        \"completed\": true,\n        \"commonUser\": false\n      }\n    }\n  ],\n  \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n  \"updatedAt\": \"2025-09-27T21:00:00.000Z\"\n}"
            },
            {
              "name": "Erro - Nome Duplicado",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Abrigo Central\",\n  \"address\": {\n    \"street\": \"Rua das Flores\",\n    \"number\": \"123\",\n    \"district\": \"Centro\",\n    \"city\": \"São Paulo\",\n    \"state\": \"SP\",\n    \"postalCode\": \"01234-567\",\n    \"complement\": \"Apto 45\"\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/shelters",
                  "host": ["{{base_url}}"],
                  "path": ["shelters"]
                }
              },
              "status": "Conflict",
              "code": 409,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"statusCode\": 409,\n  \"message\": \"Já existe um Shelter com esse nome\",\n  \"error\": \"Conflict\"\n}"
            },
            {
              "name": "Erro - Validação",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"A\",\n  \"address\": {\n    \"street\": \"Rua Teste\",\n    \"city\": \"São Paulo\",\n    \"state\": \"SP\",\n    \"postalCode\": \"01234-567\"\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/shelters",
                  "host": ["{{base_url}}"],
                  "path": ["shelters"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"statusCode\": 400,\n  \"message\": [\n    \"name must be longer than or equal to 2 characters\",\n    \"district should not be empty\"\n  ],\n  \"error\": \"Bad Request\"\n}"
            }
          ]
        },
        {
          "name": "Atualizar Shelter",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Abrigo Jardins Atualizado\",\n  \"address\": {\n    \"street\": \"Rua das Palmeiras\",\n    \"number\": \"456\",\n    \"district\": \"Jardins\",\n    \"city\": \"São Paulo\",\n    \"state\": \"SP\",\n    \"postalCode\": \"01234-890\",\n    \"complement\": \"Casa 2\"\n  },\n  \"leaderProfileId\": \"{{leader_profile_id}}\",\n  \"teacherProfileIds\": [\"{{teacher_profile_id}}\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/shelters/:id",
              "host": ["{{base_url}}"],
              "path": ["shelters", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{shelter_id}}",
                  "description": "UUID do shelter"
                }
              ]
            },
            "description": "Atualiza um shelter existente. Requer role admin ou leader. Leaders só podem atualizar seus próprios shelters."
          },
          "response": [
            {
              "name": "Sucesso - Shelter Atualizado",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Abrigo Jardins Atualizado\",\n  \"address\": {\n    \"street\": \"Rua das Palmeiras\",\n    \"number\": \"456\",\n    \"district\": \"Jardins\",\n    \"city\": \"São Paulo\",\n    \"state\": \"SP\",\n    \"postalCode\": \"01234-890\",\n    \"complement\": \"Casa 2\"\n  },\n  \"leaderProfileId\": \"uuid-leader-2\",\n  \"teacherProfileIds\": [\"uuid-teacher-2\"]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/shelters/uuid-shelter-1",
                  "host": ["{{base_url}}"],
                  "path": ["shelters", "uuid-shelter-1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"uuid-shelter-1\",\n  \"name\": \"Abrigo Jardins Atualizado\",\n  \"address\": {\n    \"id\": \"uuid-address-1\",\n    \"street\": \"Rua das Palmeiras\",\n    \"number\": \"456\",\n    \"district\": \"Jardins\",\n    \"city\": \"São Paulo\",\n    \"state\": \"SP\",\n    \"postalCode\": \"01234-890\",\n    \"complement\": \"Casa 2\",\n    \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n    \"updatedAt\": \"2025-09-27T21:30:00.000Z\"\n  },\n  \"leader\": {\n    \"id\": \"uuid-leader-2\",\n    \"active\": true,\n    \"user\": {\n      \"id\": \"uuid-user-3\",\n      \"name\": \"Pedro Santos\",\n      \"email\": \"pedro@example.com\",\n      \"phone\": \"+5511777777777\",\n      \"active\": true,\n      \"completed\": true,\n      \"commonUser\": false\n    }\n  },\n  \"teachers\": [\n    {\n      \"id\": \"uuid-teacher-2\",\n      \"active\": true,\n      \"user\": {\n        \"id\": \"uuid-user-4\",\n        \"name\": \"Ana Costa\",\n        \"email\": \"ana@example.com\",\n        \"phone\": \"+5511666666666\",\n        \"active\": true,\n        \"completed\": true,\n        \"commonUser\": false\n      }\n    }\n  ],\n  \"createdAt\": \"2025-09-27T21:00:00.000Z\",\n  \"updatedAt\": \"2025-09-27T21:30:00.000Z\"\n}"
            },
            {
              "name": "Erro - Shelter Não Encontrado",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Abrigo Teste\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/shelters/uuid-inexistente",
                  "host": ["{{base_url}}"],
                  "path": ["shelters", "uuid-inexistente"]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"statusCode\": 404,\n  \"message\": \"Shelter não encontrado\",\n  \"error\": \"Not Found\"\n}"
            }
          ]
        },
        {
          "name": "Deletar Shelter",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/shelters/:id",
              "host": ["{{base_url}}"],
              "path": ["shelters", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{shelter_id}}",
                  "description": "UUID do shelter"
                }
              ]
            },
            "description": "Remove um shelter. Requer role admin ou leader. Leaders só podem deletar seus próprios shelters."
          },
          "response": [
            {
              "name": "Sucesso - Shelter Removido",
              "originalRequest": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/shelters/uuid-shelter-1",
                  "host": ["{{base_url}}"],
                  "path": ["shelters", "uuid-shelter-1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"message\": \"Shelter removido com sucesso\"\n}"
            },
            {
              "name": "Erro - Shelter Não Encontrado",
              "originalRequest": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/shelters/uuid-inexistente",
                  "host": ["{{base_url}}"],
                  "path": ["shelters", "uuid-inexistente"]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"statusCode\": 404,\n  \"message\": \"Shelter não encontrado\",\n  \"error\": \"Not Found\"\n}"
            }
          ]
        }
      ],
      "description": "Endpoints para gerenciamento completo de Shelters com autenticação JWT e controle de acesso baseado em roles."
    }
  ]
}